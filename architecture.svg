<svg viewBox="0 0 1200 1400" xmlns="http://www.w3.org/2000/svg">
  <!-- å®šä¹‰æ ·å¼ -->
  <defs>
    <style>
      .title { font-size: 24px; font-weight: bold; fill: #1a1a1a; }
      .layer-title { font-size: 16px; font-weight: bold; fill: #fff; }
      .module-title { font-size: 14px; font-weight: bold; fill: #1a1a1a; }
      .text-small { font-size: 12px; fill: #333; }
      .text-tiny { font-size: 11px; fill: #555; }
      .box { stroke: #2c3e50; stroke-width: 2; fill: #ecf0f1; }
      .box-blue { stroke: #3498db; stroke-width: 2; fill: #e8f4f8; }
      .box-green { stroke: #27ae60; stroke-width: 2; fill: #eafaf1; }
      .box-orange { stroke: #e67e22; stroke-width: 2; fill: #fef5e7; }
      .box-purple { stroke: #8e44ad; stroke-width: 2; fill: #f4ecf7; }
      .box-red { stroke: #e74c3c; stroke-width: 2; fill: #fadbd8; }
      .arrow { stroke: #2c3e50; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-blue { stroke: #3498db; stroke-width: 2; fill: none; marker-end: url(#arrowhead-blue); }
      .layer-ui { fill: #3498db; }
      .layer-processing { fill: #e74c3c; }
      .layer-model { fill: #f39c12; }
      .layer-api { fill: #27ae60; }
    </style>
    
    <!-- ç®­å¤´æ ‡è®° -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2c3e50"/>
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#3498db"/>
    </marker>
  </defs>

  <!-- èƒŒæ™¯ -->
  <rect width="1200" height="1400" fill="#f8f9fa"/>

  <!-- æ ‡é¢˜ -->
  <text x="600" y="40" class="title" text-anchor="middle">FinBERT-LSTM å®æ—¶è‚¡ç¥¨é¢„æµ‹ç³»ç»Ÿæ¶æ„</text>
  <text x="600" y="65" class="text-small" text-anchor="middle" fill="#666">Real-time Stock Prediction System Architecture</text>

  <!-- ========== ç¬¬1å±‚ï¼šç”¨æˆ·ç•Œé¢å±‚ ========== -->
  <rect x="150" y="100" width="900" height="80" rx="5" class="layer-ui" fill="#3498db"/>
  <text x="600" y="125" class="layer-title" text-anchor="middle">ç”¨æˆ·ç•Œé¢å±‚ (Streamlit Web UI)</text>
  <text x="600" y="150" class="text-small" text-anchor="middle" fill="#fff">streamlit_server.py / run_app.py</text>
  <text x="600" y="165" class="text-small" text-anchor="middle" fill="#fff">ğŸ“Š ç”¨æˆ·è¾“å…¥è‚¡ç¥¨ä»£ç  â†’ é¢„æµ‹ç»“æœå±•ç¤º</text>

  <!-- ç®­å¤´å‘ä¸‹ -->
  <path d="M 600 180 L 600 220" class="arrow-blue"/>

  <!-- ========== ç¬¬2å±‚ï¼šå®æ—¶å¤„ç†ç®¡é“ ========== -->
  <rect x="200" y="220" width="800" height="70" rx="5" class="box-red"/>
  <text x="600" y="250" class="module-title" text-anchor="middle">ğŸ”„ å®æ—¶é¢„æµ‹å¤„ç†ç®¡é“ (main.py)</text>
  <text x="600" y="270" class="text-small" text-anchor="middle">åè°ƒæ—¥æœŸè®¡ç®—ã€æ•°æ®è·å–ã€ç‰¹å¾å·¥ç¨‹ã€æ¨¡å‹æ¨ç†</text>

  <!-- ç®­å¤´å‘ä¸‹ -->
  <path d="M 600 290 L 600 330" class="arrow"/>

  <!-- ========== ç¬¬3å±‚ï¼šå¹¶è¡Œæ•°æ®é‡‡é›† ========== -->
  <!-- è·¯å¾„åˆ†æ”¯ -->
  <path d="M 600 330 L 300 330 L 300 370" class="arrow" stroke-dasharray="5,5"/>
  <path d="M 600 330 L 900 330 L 900 370" class="arrow" stroke-dasharray="5,5"/>

  <!-- 3.1 æ—¥æœŸæ¨¡å— -->
  <rect x="150" y="370" width="300" height="110" rx="5" class="box-green"/>
  <text x="300" y="395" class="module-title" text-anchor="middle">ğŸ“… æ—¥æœŸè®¡ç®—æ¨¡å—</text>
  <text x="300" y="415" class="text-small" text-anchor="middle">date_utils.py</text>
  <rect x="160" y="425" width="280" height="45" fill="#fff" stroke="#27ae60" stroke-width="1" rx="3"/>
  <text x="300" y="442" class="text-tiny" text-anchor="middle">â€¢ è·å–æ—¥æœŸèŒƒå›´</text>
  <text x="300" y="457" class="text-tiny" text-anchor="middle">â€¢ æå–ç›®æ ‡æœˆä»½ (M-3, M-2, M-1, M)</text>
  <text x="300" y="472" class="text-tiny" text-anchor="middle">â€¢ è®¡ç®—æ—¶é—´çª—å£</text>

  <!-- 3.2 ä»·æ ¼æ•°æ®æ¨¡å— -->
  <rect x="750" y="370" width="300" height="110" rx="5" class="box-blue"/>
  <text x="900" y="395" class="module-title" text-anchor="middle">ğŸ’° å†å²ä»·æ ¼è·å–</text>
  <text x="900" y="415" class="text-small" text-anchor="middle">data_module.py</text>
  <rect x="760" y="425" width="280" height="45" fill="#fff" stroke="#3498db" stroke-width="1" rx="3"/>
  <text x="900" y="442" class="text-tiny" text-anchor="middle">â€¢ Polygon API è°ƒç”¨</text>
  <text x="900" y="457" class="text-tiny" text-anchor="middle">â€¢ è·å–æœˆåº¦è‚¡ä»·æ•°æ®</text>
  <text x="900" y="472" class="text-tiny" text-anchor="middle">â€¢ è®¡ç®—æœˆåº¦æ¶¨å¹… (%)</text>

  <!-- æ±‡åˆç®­å¤´ -->
  <path d="M 300 480 L 300 520 L 600 520 L 600 560" class="arrow"/>
  <path d="M 900 480 L 900 520 L 600 520" class="arrow"/>

  <!-- ========== ç¬¬4å±‚ï¼šæ–°é—»æ•°æ®é‡‡é›† ========== -->
  <rect x="250" y="560" width="700" height="90" rx="5" class="box-orange"/>
  <text x="600" y="585" class="module-title" text-anchor="middle">ğŸ“° æ–°é—»æ•°æ®é‡‡é›†</text>
  <text x="600" y="605" class="text-small" text-anchor="middle">Massive API / main.py</text>
  <rect x="260" y="615" width="680" height="30" fill="#fff" stroke="#e67e22" stroke-width="1" rx="3"/>
  <text x="600" y="635" class="text-tiny" text-anchor="middle">æŒ‰æœˆä»½æœç´¢é‡‘èæ–°é—» â†’ è·å–æ–°é—»æ ‡é¢˜å’Œæè¿° â†’ æŒ‰æœˆåº¦æ”¶é›†</text>

  <!-- ç®­å¤´å‘ä¸‹ -->
  <path d="M 600 650 L 600 690" class="arrow"/>

  <!-- ========== ç¬¬5å±‚ï¼šFinBERTæƒ…æ„Ÿåˆ†æ ========== -->
  <rect x="150" y="690" width="900" height="130" rx="5" class="box-purple"/>
  <text x="600" y="720" class="module-title" text-anchor="middle">ğŸ§  æƒ…æ„Ÿåˆ†ææ¨¡å— (FinBERT)</text>
  <text x="600" y="740" class="text-small" text-anchor="middle">model.py - calculate_sentiment_score()</text>
  
  <rect x="160" y="755" width="880" height="60" fill="#fff" stroke="#8e44ad" stroke-width="1" rx="3"/>
  <text x="600" y="772" class="text-tiny" text-anchor="middle">1ï¸âƒ£ åŠ è½½é¢„è®­ç»ƒFinBERTæ¨¡å‹ (é‡‘èé¢†åŸŸç‰¹åŒ–)</text>
  <text x="600" y="787" class="text-tiny" text-anchor="middle">2ï¸âƒ£ å¯¹æ¯æ¡æ–°é—»æ ‡é¢˜è¿›è¡Œåˆ†ç±»: Positive / Negative / Neutral</text>
  <text x="600" y="802" class="text-tiny" text-anchor="middle">3ï¸âƒ£ æŒ‰æœˆä»½èšåˆ â†’ è®¡ç®—æœˆåº¦å¹³å‡æƒ…æ„ŸæŒ‡æ ‡ (èŒƒå›´: -1 ~ +1)</text>

  <!-- ç®­å¤´å‘ä¸‹ -->
  <path d="M 600 820 L 600 860" class="arrow"/>

  <!-- ========== ç¬¬6å±‚ï¼šç‰¹å¾å·¥ç¨‹ ========== -->
  <rect x="150" y="860" width="900" height="150" rx="5" class="box-green"/>
  <text x="600" y="890" class="module-title" text-anchor="middle">âš™ï¸ Feature Engineering Module</text>
  <text x="600" y="910" class="text-small" text-anchor="middle">Feature Assembly &amp; Normalization</text>
  
  <!-- ç‰¹å¾çŸ©é˜µç¤ºæ„ -->
  <rect x="200" y="925" width="800" height="75" fill="#fff" stroke="#27ae60" stroke-width="1" rx="3"/>
  <text x="600" y="945" class="text-tiny" text-anchor="middle" font-weight="bold">è¾“å…¥çŸ©é˜µ (4ä¸ªæœˆçš„æ»‘åŠ¨çª—å£)ï¼š</text>
  
  <!-- è¡¨æ ¼ -->
  <text x="250" y="965" class="text-tiny">æœˆä»½</text>
  <text x="380" y="965" class="text-tiny">å†å²æ¶¨å¹…</text>
  <text x="520" y="965" class="text-tiny">æƒ…æ„ŸæŒ‡æ ‡</text>
  <text x="650" y="965" class="text-tiny">æ ‡å‡†åŒ–å¤„ç†</text>
  <text x="800" y="965" class="text-tiny">ç»“æœ</text>
  
  <line x1="240" y1="970" x2="950" y2="970" stroke="#ccc" stroke-width="1"/>
  
  <text x="250" y="985" class="text-tiny">M-3</text>
  <text x="380" y="985" class="text-tiny">râ‚ = 2.5%</text>
  <text x="520" y="985" class="text-tiny">sâ‚ = 0.3</text>
  <text x="650" y="985" class="text-tiny">â†’ Zscore</text>
  <text x="800" y="985" class="text-tiny">[-0.5, -1.2]</text>

  <!-- ç®­å¤´å‘ä¸‹ -->
  <path d="M 600 1010 L 600 1050" class="arrow"/>

  <!-- ========== ç¬¬7å±‚ï¼šLSTMæ¨¡å‹ ========== -->
  <rect x="100" y="1050" width="1000" height="180" rx="5" class="box-blue"/>
  <text x="600" y="1080" class="module-title" text-anchor="middle">ğŸ”® LSTMæ—¶åºé¢„æµ‹æ¨¡å‹</text>
  <text x="600" y="1100" class="text-small" text-anchor="middle">model.py - StockLSTMRegressor</text>

  <!-- LSTMæ¶æ„ -->
  <g>
    <!-- è¾“å…¥ -->
    <rect x="120" y="1115" width="80" height="50" rx="3" fill="#e8f4f8" stroke="#3498db" stroke-width="1"/>
    <text x="160" y="1145" class="text-tiny" text-anchor="middle" font-weight="bold">Input</text>
    <text x="160" y="1158" class="text-tiny" text-anchor="middle">(4, 2)</text>

    <!-- LSTM1 -->
    <path d="M 200 1140 L 240 1140" class="arrow"/>
    <rect x="240" y="1115" width="90" height="50" rx="3" fill="#fff8e1" stroke="#f39c12" stroke-width="1"/>
    <text x="285" y="1143" class="text-tiny" text-anchor="middle" font-weight="bold">LSTM1</text>
    <text x="285" y="1157" class="text-tiny" text-anchor="middle">64 units</text>

    <!-- Dropout -->
    <path d="M 330 1140 L 370 1140" class="arrow"/>
    <rect x="370" y="1115" width="70" height="50" rx="3" fill="#fadbd8" stroke="#e74c3c" stroke-width="1"/>
    <text x="405" y="1147" class="text-tiny" text-anchor="middle" font-weight="bold">Dropout</text>

    <!-- LSTM2 -->
    <path d="M 440 1140 L 480 1140" class="arrow"/>
    <rect x="480" y="1115" width="90" height="50" rx="3" fill="#fff8e1" stroke="#f39c12" stroke-width="1"/>
    <text x="525" y="1143" class="text-tiny" text-anchor="middle" font-weight="bold">LSTM2</text>
    <text x="525" y="1157" class="text-tiny" text-anchor="middle">64 units</text>

    <!-- æœ€åæ—¶é—´æ­¥ -->
    <path d="M 570 1140 L 610 1140" class="arrow"/>
    <rect x="610" y="1115" width="80" height="50" rx="3" fill="#eafaf1" stroke="#27ae60" stroke-width="1"/>
    <text x="650" y="1140" class="text-tiny" text-anchor="middle" font-weight="bold">Last</text>
    <text x="650" y="1154" class="text-tiny" text-anchor="middle">Output</text>

    <!-- Linear -->
    <path d="M 690 1140 L 730 1140" class="arrow"/>
    <rect x="730" y="1115" width="80" height="50" rx="3" fill="#f4ecf7" stroke="#8e44ad" stroke-width="1"/>
    <text x="770" y="1143" class="text-tiny" text-anchor="middle" font-weight="bold">Linear</text>
    <text x="770" y="1157" class="text-tiny" text-anchor="middle">(64â†’1)</text>

    <!-- è¾“å‡º -->
    <path d="M 810 1140 L 850 1140" class="arrow"/>
    <rect x="850" y="1115" width="100" height="50" rx="3" fill="#eafaf1" stroke="#27ae60" stroke-width="2"/>
    <text x="900" y="1138" class="text-tiny" text-anchor="middle" font-weight="bold">Output</text>
    <text x="900" y="1152" class="text-tiny" text-anchor="middle">ä¸‹æœˆæ¶¨å¹… (%)</text>
  </g>

  <!-- æ¨¡å‹å‚æ•° -->
  <rect x="120" y="1180" width="880" height="45" fill="#fff" stroke="#3498db" stroke-width="1" rx="3"/>
  <text x="130" y="1197" class="text-tiny">â€¢ è¾“å…¥å¤§å°: 2 (æ¶¨å¹…+æƒ…æ„Ÿ)</text>
  <text x="380" y="1197" class="text-tiny">â€¢ éšå±‚å¤§å°: 64</text>
  <text x="630" y="1197" class="text-tiny">â€¢ å±‚æ•°: 2</text>
  <text x="130" y="1215" class="text-tiny">â€¢ Dropoutç‡: 0.2</text>
  <text x="380" y="1215" class="text-tiny">â€¢ è¾“å‡º: é¢„æµ‹è‚¡ä»·æ¶¨å¹…</text>
  <text x="630" y="1215" class="text-tiny">â€¢ æŸå¤±å‡½æ•°: MSE</text>

  <!-- ç®­å¤´å‘ä¸‹ -->
  <path d="M 600 1230 L 600 1270" class="arrow"/>

  <!-- ========== ç¬¬8å±‚ï¼šç»“æœå¤„ç†ä¸å±•ç¤º ========== -->
  <rect x="150" y="1270" width="900" height="100" rx="5" class="box-red"/>
  <text x="600" y="1300" class="module-title" text-anchor="middle">ğŸ“Š ç»“æœå¤„ç†ä¸å¯è§†åŒ–</text>
  
  <rect x="160" y="1315" width="880" height="50" fill="#fff" stroke="#e74c3c" stroke-width="1" rx="3"/>
  <text x="600" y="1332" class="text-tiny" text-anchor="middle">âœ… é¢„æµ‹è‚¡ä»·  |  ğŸ“ˆ æ¶¨å¹…ç™¾åˆ†æ¯”  |  ğŸ’¬ æ–°é—»çƒ­åº¦  |  ğŸ˜Š æƒ…æ„Ÿåˆ†æ  |  ğŸ“Š å†å²å¯¹æ¯”å›¾è¡¨</text>
  <text x="600" y="1358" class="text-tiny" text-anchor="middle">è¿”å›å®Œæ•´é¢„æµ‹ç»“æœ JSON â†’ å‰ç«¯å±•ç¤º</text>

  <!-- å›¾ä¾‹ -->
  <g>
    <text x="50" y="1380" class="text-small" font-weight="bold">å›¾ä¾‹:</text>
    <rect x="50" y="1385" width="20" height="15" fill="#3498db" stroke="#2c3e50" stroke-width="1"/>
    <text x="75" y="1395" class="text-tiny">æ•°æ®è¾“å…¥</text>

    <rect x="150" y="1385" width="20" height="15" fill="#e74c3c" stroke="#2c3e50" stroke-width="1"/>
    <text x="175" y="1395" class="text-tiny">å¤„ç†æµç¨‹</text>

    <rect x="280" y="1385" width="20" height="15" fill="#f39c12" stroke="#2c3e50" stroke-width="1"/>
    <text x="305" y="1395" class="text-tiny">æ¨¡å‹æ¨ç†</text>

    <rect x="400" y="1385" width="20" height="15" fill="#27ae60" stroke="#2c3e50" stroke-width="1"/>
    <text x="425" y="1395" class="text-tiny">è®¡ç®—ç»“æœ</text>

    <rect x="520" y="1385" width="20" height="15" fill="#8e44ad" stroke="#2c3e50" stroke-width="1"/>
    <text x="545" y="1395" class="text-tiny">æ–‡æœ¬åˆ†æ</text>

    <rect x="640" y="1385" width="20" height="15" fill="#ecf0f1" stroke="#2c3e50" stroke-width="1"/>
    <text x="665" y="1395" class="text-tiny">è¾“å…¥/è¾“å‡º</text>
  </g>

</svg>